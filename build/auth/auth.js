"use strict";const usernameInput=document.getElementById("username"),passwordInput=document.getElementById("password"),loginBtn=document.getElementById("login");function isLoading(e){e?(loginBtn.loading=!0,loginBtn.querySelector(".loader").style.display="block",loginBtn.querySelector("span").style.display="none"):(loginBtn.loading=!1,loginBtn.querySelector(".loader").style.display="none",loginBtn.querySelector("span").style.display="block")}function login(){if(!loginBtn.loading){const e=usernameInput.value,n=passwordInput.value;e&&n&&(isLoading(!0),sendRequest(e,n))}}function sendRequest(e,n){fetch("https://api.getmakerlog.com/api-token-auth/",{method:"post",headers:{"content-type":"application/x-www-form-urlencoded"},body:`username=${e}&password=${n}`}).then(e=>e.json()).then(e=>{if(e.token){const n={action:"Auth.set",token:e.token};chrome.runtime.sendMessage(n),window.close()}else console.log(e),alert("Please check your credentials!");isLoading(!1)}).catch(e=>{console.log(e),isLoading(!1),alert(e.message)})}loginBtn.addEventListener("click",login),passwordInput.addEventListener("keypress",e=>{"Enter"!==e.key&&32!==e.keyCode||login()});