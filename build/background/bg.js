"use strict";function handleContentScript(e,s){switch(s.action){case"Auth.set":Api.setToken(s.token)}}function handleMessage(e){switch(e.action){case"Auth.check":Manager.checkAuth(e=>{Utils.sendMessage("Auth.set",{})});break;case"Api.getProfile":Api.getProfile((e,s)=>{Utils.sendMessage("Api.setProfile",{err:e,data:s})});break;case"Api.newTask":{const s=e.content,t=e.done,a=e.in_progress,n=e.attachment;Api.newTask(s,t,a,n,(e,s)=>{Utils.sendMessage("Api.newTask.response",{err:e,data:s})})}break;case"Manager.logout":Manager.logout();break;case"Tab.open":console.log(e.url),chrome.tabs.create({url:e.url})}}chrome.runtime.onMessage.addListener((e,s,t)=>{s.tab?handleContentScript(s,e):handleMessage(e)});